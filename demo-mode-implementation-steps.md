# デモモード実装仕様書

## 1. 概要

本仕様書は、アプリケーションにデモモードを実装するための要件と実装手順を定義します。デモモードはユーザーがアカウント作成せずにアプリの一部機能を利用できる機能です。

## 2. 対応するAppleガイドライン

**Guideline 5.1.1 - Legal - Privacy - Data Collection and Storage**

アカウントベースではない機能に対してユーザー登録やログインを要求しないように改修し、ユーザーがアプリの基本機能に自由にアクセスできるようにします。

## 3. 要件

### 3.1 初回起動フロー
1. 初回アプリ起動時に、ログイン画面ではなくオンボーディング画面を表示
2. オンボーディング完了後、ユーザーに2つの選択肢を提示:
   - アカウント作成せず利用（デモモード）
   - アカウント作成

### 3.2 デモモードの機能制限
1. デモモードではチャット機能のみ完全に利用可能
2. その他の機能はサンプルデータの閲覧のみ可能
3. レッスンの録音・アップロード等の保存が必要な機能は利用不可

### 3.3 アカウント作成へのアップグレードパス
1. デモモードからいつでもアカウント作成・ログインへ移行可能
2. 設定画面からログイン画面へのリンクを用意

## 4. 技術的実装

### 4.1 認証ストアの拡張
1. `useAuthStore`に`isDemo`フラグを追加
2. デモユーザー用の匿名認証またはローカルステートの実装

### 4.2 UI実装
1. オンボーディング完了後の選択画面の追加
2. デモモード時のUI制限（非利用可能機能の表示・操作制限）
3. デモモードを示すインジケーターの表示

### 4.3 デモデータの作成
1. サンプルレッスンデータの作成
2. サンプル練習メニューの作成
3. サンプルチャットの作成

## 5. 画面遷移フロー

1. 初回起動 → オンボーディング画面表示
2. オンボーディング完了 → モード選択画面表示
3. 「アカウント作成」選択 → ログイン/アカウント作成画面
4. 「アカウント作成せずに利用」選択 → デモモードでホーム画面

## 6. 実装手順

1. `useAuthStore`にデモモード関連の状態と機能を追加
2. オンボーディング後の選択画面を実装
3. デモモード用のデータと制限を実装
4. 各画面でのデモモード時の表示制限を実装
5. デモモードからアカウント作成への導線を追加
6. テスト・検証

## 7. 制限事項・注意点

1. デモモードではデータ永続化は行わない
2. Firebase Analyticsなどのトラッキングはプライバシーに配慮して最小限にする
3. デモモード中のアクションはローカルのみで実行し、サーバーには保存しない

以上の仕様に基づき、デモモードの実装を進めていきます。
