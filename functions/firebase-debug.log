[debug] [2025-03-23T22:02:28.044Z] ----------------------------------------------------------------------
[debug] [2025-03-23T22:02:28.045Z] Command:       /Users/miyakoshiyuuki/.nvm/versions/node/v18.20.7/bin/node /Users/miyakoshiyuuki/.nvm/versions/node/v18.20.7/bin/firebase deploy --only functions:processAudio
[debug] [2025-03-23T22:02:28.045Z] CLI Version:   13.35.1
[debug] [2025-03-23T22:02:28.045Z] Platform:      darwin
[debug] [2025-03-23T22:02:28.046Z] Node Version:  v18.20.7
[debug] [2025-03-23T22:02:28.050Z] Time:          Mon Mar 24 2025 07:02:28 GMT+0900 (日本標準時)
[debug] [2025-03-23T22:02:28.050Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-03-23T22:02:28.140Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-03-23T22:02:28.140Z] > authorizing via signed-in user (youki.miya0511@gmail.com)
[debug] [2025-03-23T22:02:28.140Z] [iam] checking project lesson-manager-99ab9 for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-03-23T22:02:28.141Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:28.141Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:28.141Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/lesson-manager-99ab9:testIamPermissions [none]
[debug] [2025-03-23T22:02:28.141Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/lesson-manager-99ab9:testIamPermissions x-goog-quota-user=projects/lesson-manager-99ab9
[debug] [2025-03-23T22:02:28.141Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lesson-manager-99ab9:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-03-23T22:02:28.624Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/lesson-manager-99ab9:testIamPermissions 200
[debug] [2025-03-23T22:02:28.625Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lesson-manager-99ab9:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-03-23T22:02:28.625Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:28.625Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:28.625Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/lesson-manager-99ab9/serviceAccounts/lesson-manager-99ab9@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-03-23T22:02:28.625Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/lesson-manager-99ab9/serviceAccounts/lesson-manager-99ab9@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-03-23T22:02:29.927Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/lesson-manager-99ab9/serviceAccounts/lesson-manager-99ab9@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-03-23T22:02:29.927Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/lesson-manager-99ab9/serviceAccounts/lesson-manager-99ab9@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'lesson-manager-99ab9'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[info] ✔  functions: Finished running predeploy script. 
[debug] [2025-03-23T22:02:31.681Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:31.681Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:31.681Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/lesson-manager-99ab9 [none]
[debug] [2025-03-23T22:02:31.904Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/lesson-manager-99ab9 200
[debug] [2025-03-23T22:02:31.904Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/lesson-manager-99ab9 {"projectNumber":"21424871541","projectId":"lesson-manager-99ab9","lifecycleState":"ACTIVE","name":"lesson-manager-google","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-03-06T06:08:38.623085Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[debug] [2025-03-23T22:02:31.906Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:31.906Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:31.906Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:31.906Z] Checked if tokens are valid: true, expires at: 1742770418565
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[debug] [2025-03-23T22:02:31.906Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:31.906Z] Checked if tokens are valid: true, expires at: 1742770418565
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-03-23T22:02:31.906Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:31.906Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:31.906Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/cloudfunctions.googleapis.com [none]
[debug] [2025-03-23T22:02:31.906Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/lesson-manager-99ab9
[debug] [2025-03-23T22:02:31.907Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/runtimeconfig.googleapis.com [none]
[debug] [2025-03-23T22:02:31.907Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/lesson-manager-99ab9
[debug] [2025-03-23T22:02:31.908Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/cloudbuild.googleapis.com [none]
[debug] [2025-03-23T22:02:31.908Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/cloudbuild.googleapis.com x-goog-quota-user=projects/lesson-manager-99ab9
[debug] [2025-03-23T22:02:31.908Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/artifactregistry.googleapis.com [none]
[debug] [2025-03-23T22:02:31.908Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/artifactregistry.googleapis.com x-goog-quota-user=projects/lesson-manager-99ab9
[debug] [2025-03-23T22:02:32.303Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/runtimeconfig.googleapis.com 200
[debug] [2025-03-23T22:02:32.303Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/runtimeconfig.googleapis.com [omitted]
[debug] [2025-03-23T22:02:32.994Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/cloudbuild.googleapis.com 200
[debug] [2025-03-23T22:02:32.995Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2025-03-23T22:02:32.999Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/cloudfunctions.googleapis.com 200
[debug] [2025-03-23T22:02:32.999Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2025-03-23T22:02:33.001Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/artifactregistry.googleapis.com 200
[debug] [2025-03-23T22:02:33.001Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2025-03-23T22:02:33.002Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:33.002Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:33.002Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/lesson-manager-99ab9/adminSdkConfig [none]
[debug] [2025-03-23T22:02:34.257Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/lesson-manager-99ab9/adminSdkConfig 200
[debug] [2025-03-23T22:02:34.257Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/lesson-manager-99ab9/adminSdkConfig {"projectId":"lesson-manager-99ab9","storageBucket":"lesson-manager-99ab9.firebasestorage.app"}
[debug] [2025-03-23T22:02:34.258Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:34.258Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:34.258Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs [none]
[debug] [2025-03-23T22:02:34.788Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs 200
[debug] [2025-03-23T22:02:34.788Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs {"configs":[{"name":"projects/lesson-manager-99ab9/configs/openai"},{"name":"projects/lesson-manager-99ab9/configs/dify"},{"name":"projects/lesson-manager-99ab9/configs/gemini"}]}
[debug] [2025-03-23T22:02:34.789Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:34.789Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:34.789Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:34.789Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:34.790Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:34.790Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:34.790Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/openai/variables [none]
[debug] [2025-03-23T22:02:34.793Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables [none]
[debug] [2025-03-23T22:02:34.796Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/gemini/variables [none]
[debug] [2025-03-23T22:02:35.092Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/openai/variables 200
[debug] [2025-03-23T22:02:35.092Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/openai/variables {"variables":[{"name":"projects/lesson-manager-99ab9/configs/openai/variables/api_key","updateTime":"2025-03-23T10:41:52.891345430Z"},{"name":"projects/lesson-manager-99ab9/configs/openai/variables/apikey","updateTime":"2025-03-18T12:11:15.636924376Z"}]}
[debug] [2025-03-23T22:02:35.092Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.092Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.092Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.092Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.092Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/openai/variables/api_key [none]
[debug] [2025-03-23T22:02:35.096Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/openai/variables/apikey [none]
[debug] [2025-03-23T22:02:35.101Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/gemini/variables 200
[debug] [2025-03-23T22:02:35.102Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/gemini/variables {"variables":[{"name":"projects/lesson-manager-99ab9/configs/gemini/variables/api_key","updateTime":"2025-03-23T10:41:44.222097533Z"},{"name":"projects/lesson-manager-99ab9/configs/gemini/variables/apikey","updateTime":"2025-03-21T17:32:35.716738208Z"}]}
[debug] [2025-03-23T22:02:35.102Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.102Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.102Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.102Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.102Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/gemini/variables/api_key [none]
[debug] [2025-03-23T22:02:35.103Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/gemini/variables/apikey [none]
[debug] [2025-03-23T22:02:35.106Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables 200
[debug] [2025-03-23T22:02:35.106Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables {"variables":[{"name":"projects/lesson-manager-99ab9/configs/dify/variables/saxophone_artist_api_key","updateTime":"2025-03-23T10:41:44.429438774Z"},{"name":"projects/lesson-manager-99ab9/configs/dify/variables/saxophone_artist_app_id","updateTime":"2025-03-23T10:41:44.592440800Z"},{"name":"projects/lesson-manager-99ab9/configs/dify/variables/summary_api_key","updateTime":"2025-03-23T10:41:44.312429556Z"},{"name":"projects/lesson-manager-99ab9/configs/dify/variables/api_key","updateTime":"2025-03-21T18:40:32.486946597Z"},{"name":"projects/lesson-manager-99ab9/configs/dify/variables/app_id","updateTime":"2025-03-21T18:40:32.848127305Z"},{"name":"projects/lesson-manager-99ab9/configs/dify/variables/standard_app_id","updateTime":"2025-03-23T10:41:44.183854797Z"},{"name":"projects/lesson-manager-99ab9/configs/dify/variables/api_base_url","updateTime":"2025-03-19T16:47:01.406123358Z"},{"name":"projects/lesson-manager-99ab9/configs/dify/variables/summary_app_id","updateTime":"2025-03-23T10:41:44.175487862Z"},{"name":"projects/lesson-manager-99ab9/configs/dify/variables/standard_api_key","updateTime":"2025-03-23T10:41:44.177608613Z"},{"name":"projects/lesson-manager-99ab9/configs/dify/variables/api_url","updateTime":"2025-03-23T10:41:44.236519519Z"}]}
[debug] [2025-03-23T22:02:35.106Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.106Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.106Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.106Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.107Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.107Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.107Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.107Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.107Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.107Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.107Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.107Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.107Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.107Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.107Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.107Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.107Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.107Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.107Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.107Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:35.107Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/saxophone_artist_api_key [none]
[debug] [2025-03-23T22:02:35.109Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/saxophone_artist_app_id [none]
[debug] [2025-03-23T22:02:35.110Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/summary_api_key [none]
[debug] [2025-03-23T22:02:35.111Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/api_key [none]
[debug] [2025-03-23T22:02:35.112Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/app_id [none]
[debug] [2025-03-23T22:02:35.114Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/standard_app_id [none]
[debug] [2025-03-23T22:02:35.115Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/api_base_url [none]
[debug] [2025-03-23T22:02:35.116Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/summary_app_id [none]
[debug] [2025-03-23T22:02:35.117Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/standard_api_key [none]
[debug] [2025-03-23T22:02:35.119Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/api_url [none]
[debug] [2025-03-23T22:02:35.388Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/saxophone_artist_api_key 200
[debug] [2025-03-23T22:02:35.388Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/saxophone_artist_api_key {"name":"projects/lesson-manager-99ab9/configs/dify/variables/saxophone_artist_api_key","updateTime":"2025-03-23T10:41:44.429438774Z","text":"your-saxophone-artist-api-key-here"}
[debug] [2025-03-23T22:02:35.390Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/gemini/variables/api_key 200
[debug] [2025-03-23T22:02:35.390Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/gemini/variables/api_key {"name":"projects/lesson-manager-99ab9/configs/gemini/variables/api_key","updateTime":"2025-03-23T10:41:44.222097533Z","text":"AIzaSyCaqljPm7Z5oiGBdEZA4z0y7qda1kECwUk"}
[debug] [2025-03-23T22:02:35.390Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/openai/variables/apikey 200
[debug] [2025-03-23T22:02:35.390Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/openai/variables/apikey {"name":"projects/lesson-manager-99ab9/configs/openai/variables/apikey","updateTime":"2025-03-18T12:11:15.636924376Z","text":"YOUR_OPENAI_API_KEY"}
[debug] [2025-03-23T22:02:35.391Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/openai/variables/api_key 200
[debug] [2025-03-23T22:02:35.391Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/openai/variables/api_key {"name":"projects/lesson-manager-99ab9/configs/openai/variables/api_key","updateTime":"2025-03-23T10:41:52.891345430Z","text":"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"}
[debug] [2025-03-23T22:02:35.391Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/gemini/variables/apikey 200
[debug] [2025-03-23T22:02:35.391Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/gemini/variables/apikey {"name":"projects/lesson-manager-99ab9/configs/gemini/variables/apikey","updateTime":"2025-03-21T17:32:35.716738208Z","text":"AIzaSyCaqljPm7Z5oiGBdEZA4z0y7qda1kECwUk"}
[debug] [2025-03-23T22:02:35.391Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/standard_app_id 200
[debug] [2025-03-23T22:02:35.391Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/standard_app_id {"name":"projects/lesson-manager-99ab9/configs/dify/variables/standard_app_id","updateTime":"2025-03-23T10:41:44.183854797Z","text":"your-standard-app-id-here"}
[debug] [2025-03-23T22:02:35.395Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/api_key 200
[debug] [2025-03-23T22:02:35.395Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/api_key {"name":"projects/lesson-manager-99ab9/configs/dify/variables/api_key","updateTime":"2025-03-21T18:40:32.486946597Z","text":"app-4Nv36yDVODLohmEyzr7wCMqt"}
[debug] [2025-03-23T22:02:35.406Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/saxophone_artist_app_id 200
[debug] [2025-03-23T22:02:35.406Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/saxophone_artist_app_id {"name":"projects/lesson-manager-99ab9/configs/dify/variables/saxophone_artist_app_id","updateTime":"2025-03-23T10:41:44.592440800Z","text":"your-saxophone-artist-app-id-here"}
[debug] [2025-03-23T22:02:35.406Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/summary_api_key 200
[debug] [2025-03-23T22:02:35.407Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/summary_api_key {"name":"projects/lesson-manager-99ab9/configs/dify/variables/summary_api_key","updateTime":"2025-03-23T10:41:44.312429556Z","text":"app-4Nv36yDVODLohmEyzr7wCMqt"}
[debug] [2025-03-23T22:02:35.407Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/standard_api_key 200
[debug] [2025-03-23T22:02:35.407Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/standard_api_key {"name":"projects/lesson-manager-99ab9/configs/dify/variables/standard_api_key","updateTime":"2025-03-23T10:41:44.177608613Z","text":"your-standard-api-key-here"}
[debug] [2025-03-23T22:02:35.408Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/api_url 200
[debug] [2025-03-23T22:02:35.408Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/api_url {"name":"projects/lesson-manager-99ab9/configs/dify/variables/api_url","updateTime":"2025-03-23T10:41:44.236519519Z","text":"https://api.dify.ai/v1"}
[debug] [2025-03-23T22:02:35.409Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/api_base_url 200
[debug] [2025-03-23T22:02:35.409Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/api_base_url {"name":"projects/lesson-manager-99ab9/configs/dify/variables/api_base_url","updateTime":"2025-03-19T16:47:01.406123358Z","text":"https://api.dify.ai/v1"}
[debug] [2025-03-23T22:02:35.415Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/app_id 200
[debug] [2025-03-23T22:02:35.415Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/app_id {"name":"projects/lesson-manager-99ab9/configs/dify/variables/app_id","updateTime":"2025-03-21T18:40:32.848127305Z","text":"b5b22025-63e0-484c-9f3c-2b7e7117d083"}
[debug] [2025-03-23T22:02:35.418Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/summary_app_id 200
[debug] [2025-03-23T22:02:35.418Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables/summary_app_id {"name":"projects/lesson-manager-99ab9/configs/dify/variables/summary_app_id","updateTime":"2025-03-23T10:41:44.175487862Z","text":"b5b22025-63e0-484c-9f3c-2b7e7117d083"}
[debug] [2025-03-23T22:02:35.420Z] Validating nodejs source
[warn] ⚠  functions: Runtime Node.js 18 will be deprecated on 2025-04-30 and will be decommissioned on 2025-10-31, after which you will not be able to deploy without upgrading. Consider upgrading now to avoid disruption. See https://cloud.google.com/functions/docs/runtime-support for full details on the lifecycle policy 
[debug] [2025-03-23T22:02:36.008Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "echo 'Skipping lint'",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@ffmpeg-installer/ffmpeg": "^1.1.0",
    "@google-cloud/secret-manager": "^6.0.1",
    "@google-cloud/speech": "^7.0.1",
    "@google-cloud/vertexai": "^1.9.3",
    "@google/generative-ai": "^0.24.0",
    "@types/express": "^5.0.0",
    "axios": "^1.6.7",
    "dotenv": "^16.4.7",
    "express": "^4.21.2",
    "firebase-admin": "^13.2.0",
    "firebase-functions": "^6.3.2",
    "fluent-ffmpeg": "^2.1.3",
    "form-data": "^4.0.2",
    "fs-extra": "^11.3.0",
    "openai": "^4.36.0",
    "react-native-chart-kit": "^6.12.0"
  },
  "devDependencies": {
    "@types/fluent-ffmpeg": "^2.1.27",
    "@types/form-data": "^2.2.1",
    "@types/fs-extra": "^11.0.4",
    "@typescript-eslint/eslint-plugin": "^6.19.1",
    "@typescript-eslint/parser": "^6.19.1",
    "eslint": "^8.56.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.29.1",
    "firebase-functions-test": "^3.1.1",
    "typescript": "^5.3.3"
  },
  "private": true
}
[debug] [2025-03-23T22:02:36.008Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2025-03-23T22:02:36.009Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-03-23T22:02:36.014Z] Found firebase-functions binary at '/Users/miyakoshiyuuki/lesson-manager-googleBKU/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8917

[debug] [2025-03-23T22:02:36.498Z] Got response from /__/functions.yaml {"endpoints":{"helloWorld":{"availableMemoryMb":256,"timeoutSeconds":60,"minInstances":0,"maxInstances":10,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-northeast1"],"labels":{},"callableTrigger":{},"entryPoint":"helloWorld"},"processAudioBasic":{"availableMemoryMb":1024,"timeoutSeconds":300,"minInstances":0,"maxInstances":10,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-northeast1"],"labels":{},"callableTrigger":{},"entryPoint":"processAudioBasic"},"processAudio":{"availableMemoryMb":4096,"timeoutSeconds":3600,"minInstances":0,"maxInstances":50,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["asia-northeast1"],"labels":{},"callableTrigger":{},"entryPoint":"processAudio"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{},"params":[{"type":"secret","name":"OPENAI_API_KEY"},{"type":"secret","name":"GEMINI_API_KEY"},{"name":"DIFY_API_URL","type":"string"},{"type":"secret","name":"DIFY_SUMMARY_API_KEY"},{"name":"DIFY_SUMMARY_APP_ID","type":"string"}]}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-03-23T22:02:36.512Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:36.512Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:36.512Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/firebaseextensions.googleapis.com [none]
[debug] [2025-03-23T22:02:36.512Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/firebaseextensions.googleapis.com x-goog-quota-user=projects/lesson-manager-99ab9
[debug] [2025-03-23T22:02:37.621Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/firebaseextensions.googleapis.com 200
[debug] [2025-03-23T22:02:37.622Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/firebaseextensions.googleapis.com [omitted]
[info] ✔  extensions: required API firebaseextensions.googleapis.com is enabled 
[debug] [2025-03-23T22:02:37.622Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-03-23T22:02:37.622Z] > authorizing via signed-in user (youki.miya0511@gmail.com)
[debug] [2025-03-23T22:02:37.622Z] [iam] checking project lesson-manager-99ab9 for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-03-23T22:02:37.622Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:37.622Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:37.623Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/lesson-manager-99ab9:testIamPermissions [none]
[debug] [2025-03-23T22:02:37.623Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/lesson-manager-99ab9:testIamPermissions x-goog-quota-user=projects/lesson-manager-99ab9
[debug] [2025-03-23T22:02:37.623Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lesson-manager-99ab9:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-03-23T22:02:38.240Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/lesson-manager-99ab9:testIamPermissions 200
[debug] [2025-03-23T22:02:38.240Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lesson-manager-99ab9:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-03-23T22:02:38.241Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:38.241Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:38.242Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/lesson-manager-99ab9/instances pageSize=100&pageToken=
[debug] [2025-03-23T22:02:39.338Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/lesson-manager-99ab9/instances 200
[debug] [2025-03-23T22:02:39.338Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/lesson-manager-99ab9/instances {}
[info] i  functions: Loaded environment variables from .env, .env.lesson-manager-99ab9. 
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /Users/miyakoshiyuuki/lesson-manager-googleBKU/functions (262.03 KB) for uploading 
[debug] [2025-03-23T22:02:39.405Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:39.405Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:39.405Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/lesson-manager-99ab9/locations/-/functions [none]
[debug] [2025-03-23T22:02:40.237Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/lesson-manager-99ab9/locations/-/functions 200
[debug] [2025-03-23T22:02:40.237Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/lesson-manager-99ab9/locations/-/functions {}
[debug] [2025-03-23T22:02:40.237Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:40.237Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:40.238Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/lesson-manager-99ab9/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-03-23T22:02:41.627Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/lesson-manager-99ab9/locations/-/functions 200
[debug] [2025-03-23T22:02:41.627Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/lesson-manager-99ab9/locations/-/functions {"functions":[{"name":"projects/lesson-manager-99ab9/locations/asia-northeast1/functions/processAudio","buildConfig":{"build":"projects/21424871541/locations/asia-northeast1/builds/3916be40-f720-4dc1-9378-19d6063ba2e0","runtime":"nodejs18","entryPoint":"processAudio","source":{"storageSource":{"bucket":"gcf-v2-sources-21424871541-asia-northeast1","object":"processAudio/function-source.zip","generation":"1742766369622795"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/lesson-manager-99ab9/locations/asia-northeast1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-21424871541-asia-northeast1","object":"processAudio/function-source.zip","generation":"1742766369622795"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/lesson-manager-99ab9/serviceAccounts/21424871541-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/lesson-manager-99ab9/locations/asia-northeast1/services/processaudio","timeoutSeconds":3600,"environmentVariables":{"DIFY_API_URL":"https://api.dify.ai/v1","DIFY_SUMMARY_APP_ID":"b5b22025-63e0-484c-9f3c-2b7e7117d083","DIFY_SUMMARY_API_KEY":"app-4Nv36yDVODLohmEyzr7wCMqt","GEMINI_API_KEY":"AIzaSyCaqljPm7Z5oiGBdEZA4z0y7qda1kECwUk","OPENAI_API_KEY":"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","FIREBASE_CONFIG":"{\"projectId\":\"lesson-manager-99ab9\",\"storageBucket\":\"lesson-manager-99ab9.firebasestorage.app\"}","GCLOUD_PROJECT":"lesson-manager-99ab9","EVENTARC_CLOUD_EVENT_SOURCE":"projects/lesson-manager-99ab9/locations/asia-northeast1/services/processAudio","FUNCTION_TARGET":"processAudio","LOG_EXECUTION_ID":"true"},"maxInstanceCount":50,"ingressSettings":"ALLOW_ALL","uri":"https://processaudio-hdpzpmerwa-an.a.run.app","serviceAccountEmail":"21424871541-compute@developer.gserviceaccount.com","availableMemory":"4Gi","allTrafficOnLatestRevision":true,"revision":"processaudio-00002-tad","maxInstanceRequestConcurrency":80,"availableCpu":"2"},"state":"ACTIVE","updateTime":"2025-03-23T21:48:08.416133161Z","labels":{"deployment-callable":"true","firebase-functions-hash":"913881dffa635ee34c21ce76096e7dbd241599e1","deployment-tool":"cli-firebase"},"environment":"GEN_2","url":"https://asia-northeast1-lesson-manager-99ab9.cloudfunctions.net/processAudio","createTime":"2025-03-23T21:29:50.986091570Z","satisfiesPzi":true},{"name":"projects/lesson-manager-99ab9/locations/asia-northeast1/functions/processAudioBasic","buildConfig":{"build":"projects/21424871541/locations/asia-northeast1/builds/09cf042a-5f8d-441f-be96-67515a21380f","runtime":"nodejs18","entryPoint":"processAudioBasic","source":{"storageSource":{"bucket":"gcf-v2-sources-21424871541-asia-northeast1","object":"processAudioBasic/function-source.zip","generation":"1742764734698554"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/lesson-manager-99ab9/locations/asia-northeast1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-21424871541-asia-northeast1","object":"processAudioBasic/function-source.zip","generation":"1742764734698554"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/lesson-manager-99ab9/serviceAccounts/21424871541-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/lesson-manager-99ab9/locations/asia-northeast1/services/processaudiobasic","timeoutSeconds":300,"environmentVariables":{"DIFY_API_URL":"https://api.dify.ai/v1","DIFY_SUMMARY_APP_ID":"b5b22025-63e0-484c-9f3c-2b7e7117d083","DIFY_SUMMARY_API_KEY":"app-4Nv36yDVODLohmEyzr7wCMqt","GEMINI_API_KEY":"AIzaSyCaqljPm7Z5oiGBdEZA4z0y7qda1kECwUk","OPENAI_API_KEY":"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","FIREBASE_CONFIG":"{\"projectId\":\"lesson-manager-99ab9\",\"storageBucket\":\"lesson-manager-99ab9.firebasestorage.app\"}","GCLOUD_PROJECT":"lesson-manager-99ab9","EVENTARC_CLOUD_EVENT_SOURCE":"projects/lesson-manager-99ab9/locations/asia-northeast1/services/processAudioBasic","FUNCTION_TARGET":"processAudioBasic","LOG_EXECUTION_ID":"true"},"maxInstanceCount":10,"ingressSettings":"ALLOW_ALL","uri":"https://processaudiobasic-hdpzpmerwa-an.a.run.app","serviceAccountEmail":"21424871541-compute@developer.gserviceaccount.com","availableMemory":"1024Mi","allTrafficOnLatestRevision":true,"revision":"processaudiobasic-00001-xov","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","updateTime":"2025-03-23T21:20:32.173319055Z","labels":{"firebase-functions-hash":"371f2835c75dec0f4092b8772414504ee63db3d8","deployment-tool":"cli-firebase","deployment-callable":"true"},"environment":"GEN_2","url":"https://asia-northeast1-lesson-manager-99ab9.cloudfunctions.net/processAudioBasic","createTime":"2025-03-23T21:18:55.565921846Z","satisfiesPzi":true},{"name":"projects/lesson-manager-99ab9/locations/asia-northeast1/functions/helloWorld","buildConfig":{"build":"projects/21424871541/locations/asia-northeast1/builds/ab153f21-cb01-4c7e-8524-601b5475449c","runtime":"nodejs18","entryPoint":"helloWorld","source":{"storageSource":{"bucket":"gcf-v2-sources-21424871541-asia-northeast1","object":"helloWorld/function-source.zip","generation":"1742764527700284"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/lesson-manager-99ab9/locations/asia-northeast1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-21424871541-asia-northeast1","object":"helloWorld/function-source.zip","generation":"1742764527700284"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/lesson-manager-99ab9/serviceAccounts/21424871541-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/lesson-manager-99ab9/locations/asia-northeast1/services/helloworld","timeoutSeconds":60,"environmentVariables":{"DIFY_API_URL":"https://api.dify.ai/v1","DIFY_SUMMARY_APP_ID":"b5b22025-63e0-484c-9f3c-2b7e7117d083","DIFY_SUMMARY_API_KEY":"app-4Nv36yDVODLohmEyzr7wCMqt","GEMINI_API_KEY":"AIzaSyCaqljPm7Z5oiGBdEZA4z0y7qda1kECwUk","OPENAI_API_KEY":"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","FIREBASE_CONFIG":"{\"projectId\":\"lesson-manager-99ab9\",\"storageBucket\":\"lesson-manager-99ab9.firebasestorage.app\"}","GCLOUD_PROJECT":"lesson-manager-99ab9","EVENTARC_CLOUD_EVENT_SOURCE":"projects/lesson-manager-99ab9/locations/asia-northeast1/services/helloWorld","FUNCTION_TARGET":"helloWorld","LOG_EXECUTION_ID":"true"},"maxInstanceCount":10,"ingressSettings":"ALLOW_ALL","uri":"https://helloworld-hdpzpmerwa-an.a.run.app","serviceAccountEmail":"21424871541-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"helloworld-00001-qom","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","updateTime":"2025-03-23T21:17:09.071624821Z","labels":{"firebase-functions-hash":"bad934760f546af03108c8122f58dbb184f12b5f","deployment-tool":"cli-firebase","deployment-callable":"true"},"environment":"GEN_2","url":"https://asia-northeast1-lesson-manager-99ab9.cloudfunctions.net/helloWorld","createTime":"2025-03-23T21:15:28.046755675Z","satisfiesPzi":true}]}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[debug] [2025-03-23T22:02:41.630Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:41.630Z] Checked if tokens are valid: true, expires at: 1742770418565
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[debug] [2025-03-23T22:02:41.630Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:41.630Z] Checked if tokens are valid: true, expires at: 1742770418565
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[debug] [2025-03-23T22:02:41.630Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:41.630Z] Checked if tokens are valid: true, expires at: 1742770418565
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[debug] [2025-03-23T22:02:41.630Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:41.630Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:41.631Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/run.googleapis.com [none]
[debug] [2025-03-23T22:02:41.631Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/run.googleapis.com x-goog-quota-user=projects/lesson-manager-99ab9
[debug] [2025-03-23T22:02:41.632Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/eventarc.googleapis.com [none]
[debug] [2025-03-23T22:02:41.632Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/eventarc.googleapis.com x-goog-quota-user=projects/lesson-manager-99ab9
[debug] [2025-03-23T22:02:41.634Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/pubsub.googleapis.com [none]
[debug] [2025-03-23T22:02:41.634Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/pubsub.googleapis.com x-goog-quota-user=projects/lesson-manager-99ab9
[debug] [2025-03-23T22:02:41.635Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/storage.googleapis.com [none]
[debug] [2025-03-23T22:02:41.635Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/storage.googleapis.com x-goog-quota-user=projects/lesson-manager-99ab9
[debug] [2025-03-23T22:02:41.929Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/eventarc.googleapis.com 200
[debug] [2025-03-23T22:02:41.929Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/eventarc.googleapis.com [omitted]
[info] ✔  functions: required API eventarc.googleapis.com is enabled 
[debug] [2025-03-23T22:02:41.939Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/pubsub.googleapis.com 200
[debug] [2025-03-23T22:02:41.939Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/pubsub.googleapis.com [omitted]
[info] ✔  functions: required API pubsub.googleapis.com is enabled 
[debug] [2025-03-23T22:02:42.631Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/storage.googleapis.com 200
[debug] [2025-03-23T22:02:42.631Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/storage.googleapis.com [omitted]
[info] ✔  functions: required API storage.googleapis.com is enabled 
[debug] [2025-03-23T22:02:42.634Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/run.googleapis.com 200
[debug] [2025-03-23T22:02:42.634Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/run.googleapis.com [omitted]
[info] ✔  functions: required API run.googleapis.com is enabled 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[debug] [2025-03-23T22:02:42.634Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:42.634Z] Checked if tokens are valid: true, expires at: 1742770418565
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2025-03-23T22:02:42.634Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:42.634Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:42.634Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/21424871541/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2025-03-23T22:02:42.635Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/21424871541/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2025-03-23T22:02:43.731Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/21424871541/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2025-03-23T22:02:43.731Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/21424871541/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-21424871541@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"104103946152974063080"}}
[debug] [2025-03-23T22:02:43.738Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/21424871541/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2025-03-23T22:02:43.738Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/21424871541/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-21424871541@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"103486607351144075976"}}
[debug] [2025-03-23T22:02:43.740Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:43.740Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:43.740Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/lesson-manager-99ab9 [none]
[debug] [2025-03-23T22:02:44.416Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/lesson-manager-99ab9 200
[debug] [2025-03-23T22:02:44.416Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/lesson-manager-99ab9 {"projectNumber":"21424871541","projectId":"lesson-manager-99ab9","lifecycleState":"ACTIVE","name":"lesson-manager-google","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-03-06T06:08:38.623085Z"}
[debug] [2025-03-23T22:02:44.418Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:44.418Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:44.418Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/lesson-manager-99ab9/billingInfo [none]
[debug] [2025-03-23T22:02:46.030Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/lesson-manager-99ab9/billingInfo 200
[debug] [2025-03-23T22:02:46.031Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/lesson-manager-99ab9/billingInfo {"name":"projects/lesson-manager-99ab9/billingInfo","projectId":"lesson-manager-99ab9","billingAccountName":"billingAccounts/0147D4-DB6632-E8A903","billingEnabled":true}
[debug] [2025-03-23T22:02:46.032Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:46.032Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:46.032Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/lesson-manager-99ab9/locations/asia-northeast1/functions:generateUploadUrl [none]
[debug] [2025-03-23T22:02:46.522Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/lesson-manager-99ab9/locations/asia-northeast1/functions:generateUploadUrl 200
[debug] [2025-03-23T22:02:46.522Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/lesson-manager-99ab9/locations/asia-northeast1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-21424871541.asia-northeast1.cloudfunctions.appspot.com/8e739c1c-9036-4575-abc0-3c8fc8a3c841.zip?GoogleAccessId=service-21424871541@gcf-admin-robot.iam.gserviceaccount.com&Expires=1742769166&Signature=O8qFwmoDNsZuW%2BUSomzcJoUAREFA5Oqw1aeN0irvAn9aetOWwQZKPptFsGNWomKqna9Zp3eby8%2FT1tlDAPtFoyQ7vdwkb3GeEz9CmDciY2J3fYBvcPMc%2FW%2Bw6i7sgfAyaDqiuLbPRjtmvm%2BNVLfECl%2F1RHvSDoCo7WKe%2Fnt%2BwXj1d3FZ%2FP4%2BdNSffwZ67u%2BfhxslJKd8sFdkyP8ChMhzD3snMuDWnL6kN%2FNQLZFRn8GK%2B87WAU58WU2I4CGrZgLFifyJt7yXK%2B5jzpYmxBighz6dcFuVXYXtSFDnDOBcRTAiNgBDLb9nx%2FG5XaIVTeeeVcZ9a%2FkYo42mYWnLNmN%2B8A%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-21424871541.asia-northeast1.cloudfunctions.appspot.com","object":"8e739c1c-9036-4575-abc0-3c8fc8a3c841.zip"}}
[debug] [2025-03-23T22:02:46.523Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-21424871541.asia-northeast1.cloudfunctions.appspot.com/8e739c1c-9036-4575-abc0-3c8fc8a3c841.zip GoogleAccessId=service-21424871541%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1742769166&Signature=O8qFwmoDNsZuW%2BUSomzcJoUAREFA5Oqw1aeN0irvAn9aetOWwQZKPptFsGNWomKqna9Zp3eby8%2FT1tlDAPtFoyQ7vdwkb3GeEz9CmDciY2J3fYBvcPMc%2FW%2Bw6i7sgfAyaDqiuLbPRjtmvm%2BNVLfECl%2F1RHvSDoCo7WKe%2Fnt%2BwXj1d3FZ%2FP4%2BdNSffwZ67u%2BfhxslJKd8sFdkyP8ChMhzD3snMuDWnL6kN%2FNQLZFRn8GK%2B87WAU58WU2I4CGrZgLFifyJt7yXK%2B5jzpYmxBighz6dcFuVXYXtSFDnDOBcRTAiNgBDLb9nx%2FG5XaIVTeeeVcZ9a%2FkYo42mYWnLNmN%2B8A%3D%3D
[debug] [2025-03-23T22:02:46.523Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-21424871541.asia-northeast1.cloudfunctions.appspot.com/8e739c1c-9036-4575-abc0-3c8fc8a3c841.zip [stream]
[debug] [2025-03-23T22:02:47.055Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-21424871541.asia-northeast1.cloudfunctions.appspot.com/8e739c1c-9036-4575-abc0-3c8fc8a3c841.zip 200
[debug] [2025-03-23T22:02:47.055Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-21424871541.asia-northeast1.cloudfunctions.appspot.com/8e739c1c-9036-4575-abc0-3c8fc8a3c841.zip [omitted]
[info] ✔  functions: functions folder uploaded successfully 
[info] i  functions: updating Node.js 18 (2nd Gen) function processAudio(asia-northeast1)... 
[debug] [2025-03-23T22:02:47.062Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:47.062Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:47.062Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v2/projects/lesson-manager-99ab9/locations/asia-northeast1/functions/processAudio updateMask=name%2CbuildConfig.runtime%2CbuildConfig.entryPoint%2CbuildConfig.source.storageSource.bucket%2CbuildConfig.source.storageSource.object%2CbuildConfig.environmentVariables%2CbuildConfig.sourceToken%2CserviceConfig.environmentVariables%2CserviceConfig.ingressSettings%2CserviceConfig.timeoutSeconds%2CserviceConfig.serviceAccountEmail%2CserviceConfig.availableMemory%2CserviceConfig.minInstanceCount%2CserviceConfig.maxInstanceCount%2CserviceConfig.maxInstanceRequestConcurrency%2CserviceConfig.availableCpu%2CserviceConfig.vpcConnector%2CserviceConfig.vpcConnectorEgressSettings%2Clabels%2CbuildConfig.buildEnvironmentVariables
[debug] [2025-03-23T22:02:47.062Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/lesson-manager-99ab9/locations/asia-northeast1/functions/processAudio {"name":"projects/lesson-manager-99ab9/locations/asia-northeast1/functions/processAudio","buildConfig":{"runtime":"nodejs18","entryPoint":"processAudio","source":{"storageSource":{"bucket":"gcf-v2-uploads-21424871541.asia-northeast1.cloudfunctions.appspot.com","object":"8e739c1c-9036-4575-abc0-3c8fc8a3c841.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"DIFY_API_URL":"https://api.dify.ai/v1","DIFY_SUMMARY_APP_ID":"b5b22025-63e0-484c-9f3c-2b7e7117d083","DIFY_SUMMARY_API_KEY":"app-4Nv36yDVODLohmEyzr7wCMqt","GEMINI_API_KEY":"AIzaSyCaqljPm7Z5oiGBdEZA4z0y7qda1kECwUk","OPENAI_API_KEY":"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","FIREBASE_CONFIG":"{\"projectId\":\"lesson-manager-99ab9\",\"storageBucket\":\"lesson-manager-99ab9.firebasestorage.app\"}","GCLOUD_PROJECT":"lesson-manager-99ab9","EVENTARC_CLOUD_EVENT_SOURCE":"projects/lesson-manager-99ab9/locations/asia-northeast1/services/processAudio","FUNCTION_TARGET":"processAudio","LOG_EXECUTION_ID":"true"},"ingressSettings":null,"timeoutSeconds":3600,"serviceAccountEmail":null,"availableMemory":"4Gi","minInstanceCount":0,"maxInstanceCount":50,"maxInstanceRequestConcurrency":80,"availableCpu":"2","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"6374512f969aba1585291dfe374030a3cf0bb9a2"}}
[debug] [2025-03-23T22:02:48.216Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v2/projects/lesson-manager-99ab9/locations/asia-northeast1/functions/processAudio 200
[debug] [2025-03-23T22:02:48.216Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/lesson-manager-99ab9/locations/asia-northeast1/functions/processAudio {"name":"projects/lesson-manager-99ab9/locations/asia-northeast1/operations/operation-1742767367532-63109a5de311d-ed479112-38fe20f6","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-23T22:02:48.269752804Z","target":"projects/lesson-manager-99ab9/locations/asia-northeast1/functions/processAudio","verb":"update","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2025-03-23T22:02:48.217Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:48.217Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:48.217Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/lesson-manager-99ab9/locations/asia-northeast1/operations/operation-1742767367532-63109a5de311d-ed479112-38fe20f6 [none]
[debug] [2025-03-23T22:02:48.417Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/lesson-manager-99ab9/locations/asia-northeast1/operations/operation-1742767367532-63109a5de311d-ed479112-38fe20f6 200
[debug] [2025-03-23T22:02:48.418Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/lesson-manager-99ab9/locations/asia-northeast1/operations/operation-1742767367532-63109a5de311d-ed479112-38fe20f6 {"name":"projects/lesson-manager-99ab9/locations/asia-northeast1/operations/operation-1742767367532-63109a5de311d-ed479112-38fe20f6","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-23T22:02:48.269752804Z","target":"projects/lesson-manager-99ab9/locations/asia-northeast1/functions/processAudio","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/lesson-manager-99ab9/locations/asia-northeast1/functions/processAudio","buildConfig":{"runtime":"nodejs18","entryPoint":"processAudio","source":{"storageSource":{"bucket":"gcf-v2-sources-21424871541-asia-northeast1","object":"processAudio/function-source.zip","generation":"1742767368232493"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/lesson-manager-99ab9/locations/asia-northeast1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-21424871541-asia-northeast1","object":"processAudio/function-source.zip","generation":"1742766369622795"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/lesson-manager-99ab9/serviceAccounts/21424871541-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/lesson-manager-99ab9/locations/asia-northeast1/services/processaudio","timeoutSeconds":3600,"environmentVariables":{"DIFY_API_URL":"https://api.dify.ai/v1","DIFY_SUMMARY_APP_ID":"b5b22025-63e0-484c-9f3c-2b7e7117d083","DIFY_SUMMARY_API_KEY":"app-4Nv36yDVODLohmEyzr7wCMqt","GEMINI_API_KEY":"AIzaSyCaqljPm7Z5oiGBdEZA4z0y7qda1kECwUk","OPENAI_API_KEY":"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","FIREBASE_CONFIG":"{\"projectId\":\"lesson-manager-99ab9\",\"storageBucket\":\"lesson-manager-99ab9.firebasestorage.app\"}","GCLOUD_PROJECT":"lesson-manager-99ab9","EVENTARC_CLOUD_EVENT_SOURCE":"projects/lesson-manager-99ab9/locations/asia-northeast1/services/processAudio","FUNCTION_TARGET":"processAudio","LOG_EXECUTION_ID":"true"},"maxInstanceCount":50,"ingressSettings":"ALLOW_ALL","uri":"https://processaudio-hdpzpmerwa-an.a.run.app","serviceAccountEmail":"21424871541-compute@developer.gserviceaccount.com","availableMemory":"4Gi","allTrafficOnLatestRevision":true,"revision":"processaudio-00002-tad","maxInstanceRequestConcurrency":80,"availableCpu":"2"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"6374512f969aba1585291dfe374030a3cf0bb9a2"},"environment":"GEN_2","url":"https://asia-northeast1-lesson-manager-99ab9.cloudfunctions.net/processAudio","satisfiesPzi":true},"stages":[{"name":"BUILD","state":"NOT_STARTED","stateMessages":[{"severity":"WARNING","type":"BuildAnalysisWarning","message":"Node.js 18 is no longer supported by the Node.js community as of 30 April, 2025. Node.js 18 will be deprecated on 2025-04-30. We recommend you to upgrade to the latest version of Node.js as soon as possible."}]},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2025-03-23T22:02:48.920Z] [update-default-asia-northeast1-processAudio] Retrying task index 0
[debug] [2025-03-23T22:02:48.920Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:48.921Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:48.921Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/lesson-manager-99ab9/locations/asia-northeast1/operations/operation-1742767367532-63109a5de311d-ed479112-38fe20f6 [none]
[debug] [2025-03-23T22:02:49.316Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/lesson-manager-99ab9/locations/asia-northeast1/operations/operation-1742767367532-63109a5de311d-ed479112-38fe20f6 200
[debug] [2025-03-23T22:02:49.316Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/lesson-manager-99ab9/locations/asia-northeast1/operations/operation-1742767367532-63109a5de311d-ed479112-38fe20f6 {"name":"projects/lesson-manager-99ab9/locations/asia-northeast1/operations/operation-1742767367532-63109a5de311d-ed479112-38fe20f6","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-23T22:02:48.269752804Z","target":"projects/lesson-manager-99ab9/locations/asia-northeast1/functions/processAudio","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/lesson-manager-99ab9/locations/asia-northeast1/functions/processAudio","buildConfig":{"runtime":"nodejs18","entryPoint":"processAudio","source":{"storageSource":{"bucket":"gcf-v2-sources-21424871541-asia-northeast1","object":"processAudio/function-source.zip","generation":"1742767368232493"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/lesson-manager-99ab9/locations/asia-northeast1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-21424871541-asia-northeast1","object":"processAudio/function-source.zip","generation":"1742766369622795"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/lesson-manager-99ab9/serviceAccounts/21424871541-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/lesson-manager-99ab9/locations/asia-northeast1/services/processaudio","timeoutSeconds":3600,"environmentVariables":{"DIFY_API_URL":"https://api.dify.ai/v1","DIFY_SUMMARY_APP_ID":"b5b22025-63e0-484c-9f3c-2b7e7117d083","DIFY_SUMMARY_API_KEY":"app-4Nv36yDVODLohmEyzr7wCMqt","GEMINI_API_KEY":"AIzaSyCaqljPm7Z5oiGBdEZA4z0y7qda1kECwUk","OPENAI_API_KEY":"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","FIREBASE_CONFIG":"{\"projectId\":\"lesson-manager-99ab9\",\"storageBucket\":\"lesson-manager-99ab9.firebasestorage.app\"}","GCLOUD_PROJECT":"lesson-manager-99ab9","EVENTARC_CLOUD_EVENT_SOURCE":"projects/lesson-manager-99ab9/locations/asia-northeast1/services/processAudio","FUNCTION_TARGET":"processAudio","LOG_EXECUTION_ID":"true"},"maxInstanceCount":50,"ingressSettings":"ALLOW_ALL","uri":"https://processaudio-hdpzpmerwa-an.a.run.app","serviceAccountEmail":"21424871541-compute@developer.gserviceaccount.com","availableMemory":"4Gi","allTrafficOnLatestRevision":true,"revision":"processaudio-00002-tad","maxInstanceRequestConcurrency":80,"availableCpu":"2"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"6374512f969aba1585291dfe374030a3cf0bb9a2"},"environment":"GEN_2","url":"https://asia-northeast1-lesson-manager-99ab9.cloudfunctions.net/processAudio","satisfiesPzi":true},"stages":[{"name":"BUILD","state":"NOT_STARTED","stateMessages":[{"severity":"WARNING","type":"BuildAnalysisWarning","message":"Node.js 18 is no longer supported by the Node.js community as of 30 April, 2025. Node.js 18 will be deprecated on 2025-04-30. We recommend you to upgrade to the latest version of Node.js as soon as possible."}]},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2025-03-23T22:02:50.317Z] [update-default-asia-northeast1-processAudio] Retrying task index 0
[debug] [2025-03-23T22:02:50.318Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:50.318Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:50.318Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/lesson-manager-99ab9/locations/asia-northeast1/operations/operation-1742767367532-63109a5de311d-ed479112-38fe20f6 [none]
[debug] [2025-03-23T22:02:50.707Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/lesson-manager-99ab9/locations/asia-northeast1/operations/operation-1742767367532-63109a5de311d-ed479112-38fe20f6 200
[debug] [2025-03-23T22:02:50.707Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/lesson-manager-99ab9/locations/asia-northeast1/operations/operation-1742767367532-63109a5de311d-ed479112-38fe20f6 {"name":"projects/lesson-manager-99ab9/locations/asia-northeast1/operations/operation-1742767367532-63109a5de311d-ed479112-38fe20f6","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-23T22:02:48.269752804Z","target":"projects/lesson-manager-99ab9/locations/asia-northeast1/functions/processAudio","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/lesson-manager-99ab9/locations/asia-northeast1/functions/processAudio","buildConfig":{"runtime":"nodejs18","entryPoint":"processAudio","source":{"storageSource":{"bucket":"gcf-v2-sources-21424871541-asia-northeast1","object":"processAudio/function-source.zip","generation":"1742767368232493"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/lesson-manager-99ab9/locations/asia-northeast1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-21424871541-asia-northeast1","object":"processAudio/function-source.zip","generation":"1742766369622795"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/lesson-manager-99ab9/serviceAccounts/21424871541-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/lesson-manager-99ab9/locations/asia-northeast1/services/processaudio","timeoutSeconds":3600,"environmentVariables":{"DIFY_API_URL":"https://api.dify.ai/v1","DIFY_SUMMARY_APP_ID":"b5b22025-63e0-484c-9f3c-2b7e7117d083","DIFY_SUMMARY_API_KEY":"app-4Nv36yDVODLohmEyzr7wCMqt","GEMINI_API_KEY":"AIzaSyCaqljPm7Z5oiGBdEZA4z0y7qda1kECwUk","OPENAI_API_KEY":"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","FIREBASE_CONFIG":"{\"projectId\":\"lesson-manager-99ab9\",\"storageBucket\":\"lesson-manager-99ab9.firebasestorage.app\"}","GCLOUD_PROJECT":"lesson-manager-99ab9","EVENTARC_CLOUD_EVENT_SOURCE":"projects/lesson-manager-99ab9/locations/asia-northeast1/services/processAudio","FUNCTION_TARGET":"processAudio","LOG_EXECUTION_ID":"true"},"maxInstanceCount":50,"ingressSettings":"ALLOW_ALL","uri":"https://processaudio-hdpzpmerwa-an.a.run.app","serviceAccountEmail":"21424871541-compute@developer.gserviceaccount.com","availableMemory":"4Gi","allTrafficOnLatestRevision":true,"revision":"processaudio-00002-tad","maxInstanceRequestConcurrency":80,"availableCpu":"2"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"6374512f969aba1585291dfe374030a3cf0bb9a2"},"environment":"GEN_2","url":"https://asia-northeast1-lesson-manager-99ab9.cloudfunctions.net/processAudio","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/21424871541/locations/asia-northeast1/builds/2d9180f7-f39c-410b-b66a-90c29fe340cb","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=asia-northeast1/2d9180f7-f39c-410b-b66a-90c29fe340cb?project=21424871541"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/21424871541/locations/asia-northeast1/builds/2d9180f7-f39c-410b-b66a-90c29fe340cb"},"done":false}
[debug] [2025-03-23T22:02:52.708Z] [update-default-asia-northeast1-processAudio] Retrying task index 0
[debug] [2025-03-23T22:02:52.709Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:52.709Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:02:52.709Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/lesson-manager-99ab9/locations/asia-northeast1/operations/operation-1742767367532-63109a5de311d-ed479112-38fe20f6 [none]
[debug] [2025-03-23T22:02:53.111Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/lesson-manager-99ab9/locations/asia-northeast1/operations/operation-1742767367532-63109a5de311d-ed479112-38fe20f6 200
[debug] [2025-03-23T22:02:53.111Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/lesson-manager-99ab9/locations/asia-northeast1/operations/operation-1742767367532-63109a5de311d-ed479112-38fe20f6 {"name":"projects/lesson-manager-99ab9/locations/asia-northeast1/operations/operation-1742767367532-63109a5de311d-ed479112-38fe20f6","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-23T22:02:48.269752804Z","target":"projects/lesson-manager-99ab9/locations/asia-northeast1/functions/processAudio","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/lesson-manager-99ab9/locations/asia-northeast1/functions/processAudio","buildConfig":{"runtime":"nodejs18","entryPoint":"processAudio","source":{"storageSource":{"bucket":"gcf-v2-sources-21424871541-asia-northeast1","object":"processAudio/function-source.zip","generation":"1742767368232493"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/lesson-manager-99ab9/locations/asia-northeast1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-21424871541-asia-northeast1","object":"processAudio/function-source.zip","generation":"1742766369622795"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/lesson-manager-99ab9/serviceAccounts/21424871541-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/lesson-manager-99ab9/locations/asia-northeast1/services/processaudio","timeoutSeconds":3600,"environmentVariables":{"DIFY_API_URL":"https://api.dify.ai/v1","DIFY_SUMMARY_APP_ID":"b5b22025-63e0-484c-9f3c-2b7e7117d083","DIFY_SUMMARY_API_KEY":"app-4Nv36yDVODLohmEyzr7wCMqt","GEMINI_API_KEY":"AIzaSyCaqljPm7Z5oiGBdEZA4z0y7qda1kECwUk","OPENAI_API_KEY":"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","FIREBASE_CONFIG":"{\"projectId\":\"lesson-manager-99ab9\",\"storageBucket\":\"lesson-manager-99ab9.firebasestorage.app\"}","GCLOUD_PROJECT":"lesson-manager-99ab9","EVENTARC_CLOUD_EVENT_SOURCE":"projects/lesson-manager-99ab9/locations/asia-northeast1/services/processAudio","FUNCTION_TARGET":"processAudio","LOG_EXECUTION_ID":"true"},"maxInstanceCount":50,"ingressSettings":"ALLOW_ALL","uri":"https://processaudio-hdpzpmerwa-an.a.run.app","serviceAccountEmail":"21424871541-compute@developer.gserviceaccount.com","availableMemory":"4Gi","allTrafficOnLatestRevision":true,"revision":"processaudio-00002-tad","maxInstanceRequestConcurrency":80,"availableCpu":"2"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"6374512f969aba1585291dfe374030a3cf0bb9a2"},"environment":"GEN_2","url":"https://asia-northeast1-lesson-manager-99ab9.cloudfunctions.net/processAudio","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/21424871541/locations/asia-northeast1/builds/2d9180f7-f39c-410b-b66a-90c29fe340cb","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=asia-northeast1/2d9180f7-f39c-410b-b66a-90c29fe340cb?project=21424871541"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/21424871541/locations/asia-northeast1/builds/2d9180f7-f39c-410b-b66a-90c29fe340cb"},"done":false}
[debug] [2025-03-23T22:03:05.163Z] ----------------------------------------------------------------------
[debug] [2025-03-23T22:03:05.164Z] Command:       /Users/miyakoshiyuuki/.nvm/versions/node/v18.20.7/bin/node /Users/miyakoshiyuuki/.nvm/versions/node/v18.20.7/bin/firebase deploy --only functions:processAudio
[debug] [2025-03-23T22:03:05.164Z] CLI Version:   13.35.1
[debug] [2025-03-23T22:03:05.164Z] Platform:      darwin
[debug] [2025-03-23T22:03:05.164Z] Node Version:  v18.20.7
[debug] [2025-03-23T22:03:05.165Z] Time:          Mon Mar 24 2025 07:03:05 GMT+0900 (日本標準時)
[debug] [2025-03-23T22:03:05.166Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-03-23T22:03:05.412Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-03-23T22:03:05.412Z] > authorizing via signed-in user (youki.miya0511@gmail.com)
[debug] [2025-03-23T22:03:05.412Z] [iam] checking project lesson-manager-99ab9 for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-03-23T22:03:05.413Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:03:05.413Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:03:05.414Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/lesson-manager-99ab9:testIamPermissions [none]
[debug] [2025-03-23T22:03:05.414Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/lesson-manager-99ab9:testIamPermissions x-goog-quota-user=projects/lesson-manager-99ab9
[debug] [2025-03-23T22:03:05.414Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lesson-manager-99ab9:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-03-23T22:03:06.562Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/lesson-manager-99ab9:testIamPermissions 200
[debug] [2025-03-23T22:03:06.562Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/lesson-manager-99ab9:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-03-23T22:03:06.562Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:03:06.562Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:03:06.562Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/lesson-manager-99ab9/serviceAccounts/lesson-manager-99ab9@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-03-23T22:03:06.562Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/lesson-manager-99ab9/serviceAccounts/lesson-manager-99ab9@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-03-23T22:03:06.771Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/lesson-manager-99ab9/serviceAccounts/lesson-manager-99ab9@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-03-23T22:03:06.771Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/lesson-manager-99ab9/serviceAccounts/lesson-manager-99ab9@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'lesson-manager-99ab9'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[info] ✔  functions: Finished running predeploy script. 
[debug] [2025-03-23T22:03:08.877Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:03:08.877Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:03:08.878Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/lesson-manager-99ab9 [none]
[debug] [2025-03-23T22:03:09.545Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/lesson-manager-99ab9 200
[debug] [2025-03-23T22:03:09.546Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/lesson-manager-99ab9 {"projectNumber":"21424871541","projectId":"lesson-manager-99ab9","lifecycleState":"ACTIVE","name":"lesson-manager-google","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-03-06T06:08:38.623085Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[debug] [2025-03-23T22:03:09.546Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:03:09.546Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:03:09.547Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:03:09.547Z] Checked if tokens are valid: true, expires at: 1742770418565
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[debug] [2025-03-23T22:03:09.547Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:03:09.547Z] Checked if tokens are valid: true, expires at: 1742770418565
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-03-23T22:03:09.547Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:03:09.547Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:03:09.547Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/cloudfunctions.googleapis.com [none]
[debug] [2025-03-23T22:03:09.547Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/lesson-manager-99ab9
[debug] [2025-03-23T22:03:09.548Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/runtimeconfig.googleapis.com [none]
[debug] [2025-03-23T22:03:09.548Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/lesson-manager-99ab9
[debug] [2025-03-23T22:03:09.549Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/cloudbuild.googleapis.com [none]
[debug] [2025-03-23T22:03:09.549Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/cloudbuild.googleapis.com x-goog-quota-user=projects/lesson-manager-99ab9
[debug] [2025-03-23T22:03:09.550Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/artifactregistry.googleapis.com [none]
[debug] [2025-03-23T22:03:09.550Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/artifactregistry.googleapis.com x-goog-quota-user=projects/lesson-manager-99ab9
[debug] [2025-03-23T22:03:09.838Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/artifactregistry.googleapis.com 200
[debug] [2025-03-23T22:03:09.838Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2025-03-23T22:03:09.875Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/cloudfunctions.googleapis.com 200
[debug] [2025-03-23T22:03:09.875Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2025-03-23T22:03:10.540Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/cloudbuild.googleapis.com 200
[debug] [2025-03-23T22:03:10.541Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2025-03-23T22:03:10.541Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/runtimeconfig.googleapis.com 200
[debug] [2025-03-23T22:03:10.542Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/lesson-manager-99ab9/services/runtimeconfig.googleapis.com [omitted]
[debug] [2025-03-23T22:03:10.542Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:03:10.542Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:03:10.542Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/lesson-manager-99ab9/adminSdkConfig [none]
[debug] [2025-03-23T22:03:11.055Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/lesson-manager-99ab9/adminSdkConfig 200
[debug] [2025-03-23T22:03:11.055Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/lesson-manager-99ab9/adminSdkConfig {"projectId":"lesson-manager-99ab9","storageBucket":"lesson-manager-99ab9.firebasestorage.app"}
[debug] [2025-03-23T22:03:11.055Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:03:11.055Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:03:11.056Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs [none]
[debug] [2025-03-23T22:03:11.940Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs 200
[debug] [2025-03-23T22:03:11.940Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs {"configs":[{"name":"projects/lesson-manager-99ab9/configs/dify"},{"name":"projects/lesson-manager-99ab9/configs/gemini"},{"name":"projects/lesson-manager-99ab9/configs/openai"}]}
[debug] [2025-03-23T22:03:11.940Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:03:11.940Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:03:11.940Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:03:11.940Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:03:11.940Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:03:11.940Z] Checked if tokens are valid: true, expires at: 1742770418565
[debug] [2025-03-23T22:03:11.940Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/dify/variables [none]
[debug] [2025-03-23T22:03:11.942Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/gemini/variables [none]
[debug] [2025-03-23T22:03:11.943Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/lesson-manager-99ab9/configs/openai/variables [none]
